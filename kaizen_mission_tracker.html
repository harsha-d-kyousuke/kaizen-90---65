<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kaizen 90‚Üí65 Mission</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600;700&display=swap');

        :root {
            --bg-primary: #0a0a0a;
            --bg-secondary: #1a1a1a;
            --text-primary: #ffffff;
            --text-secondary: #b0b0b0;
            --accent-green: #00ff41;
            --accent-blue: #00d4ff;
            --border-color: #333;
            --progress-bg: #222;
            --checkbox-checked: #00ff41;
        }

        .light-theme {
            --bg-primary: #ffffff;
            --bg-secondary: #f5f5f5;
            --text-primary: #000000;
            --text-secondary: #666666;
            --accent-green: #00b82f;
            --accent-blue: #0099cc;
            --border-color: #ddd;
            --progress-bg: #e0e0e0;
            --checkbox-checked: #00b82f;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'JetBrains Mono', monospace;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            transition: all 0.3s ease;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 40px;
            position: relative;
        }

        .title {
            font-size: 3rem;
            font-weight: 700;
            color: var(--accent-green);
            text-shadow: 0 0 20px rgba(0, 255, 65, 0.5);
            margin-bottom: 10px;
            animation: glow 2s ease-in-out infinite alternate;
        }

        .subtitle {
            font-size: 1.2rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .theme-toggle {
            position: absolute;
            top: 0;
            right: 0;
            background: var(--bg-secondary);
            border: 2px solid var(--border-color);
            color: var(--text-primary);
            padding: 10px 20px;
            font-family: inherit;
            cursor: pointer;
            border-radius: 5px;
            transition: all 0.3s ease;
        }

        .theme-toggle:hover {
            border-color: var(--accent-blue);
            box-shadow: 0 0 10px rgba(0, 212, 255, 0.3);
        }

        /* Profile Section */
        .profile-section {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 30px;
            gap: 20px;
        }

        .profile-image {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            border: 3px solid var(--accent-green);
            object-fit: cover;
            animation: pulse 2s infinite;
        }

        .upload-btn {
            background: var(--bg-secondary);
            border: 2px solid var(--accent-blue);
            color: var(--text-primary);
            padding: 10px 20px;
            cursor: pointer;
            border-radius: 5px;
            font-family: inherit;
            transition: all 0.3s ease;
        }

        .upload-btn:hover {
            background: var(--accent-blue);
            color: var(--bg-primary);
        }

        /* Stats Dashboard */
        .stats-dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: var(--bg-secondary);
            border: 2px solid var(--border-color);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            border-color: var(--accent-green);
            box-shadow: 0 0 15px rgba(0, 255, 65, 0.2);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--accent-green);
            display: block;
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-top: 5px;
        }

        /* Day Navigation */
        .day-nav {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-bottom: 30px;
        }

        .nav-btn {
            background: var(--bg-secondary);
            border: 2px solid var(--accent-blue);
            color: var(--text-primary);
            padding: 10px 20px;
            cursor: pointer;
            border-radius: 5px;
            font-family: inherit;
            transition: all 0.3s ease;
        }

        .nav-btn:hover:not(:disabled) {
            background: var(--accent-blue);
            color: var(--bg-primary);
        }

        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .day-info {
            text-align: center;
        }

        .current-day {
            font-size: 2rem;
            font-weight: 700;
            color: var(--accent-green);
        }

        .phase {
            color: var(--accent-blue);
            font-size: 0.9rem;
        }

        /* Mission Log */
        .mission-log {
            background: var(--bg-secondary);
            border: 2px solid var(--border-color);
            border-radius: 10px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .section-title {
            font-size: 1.5rem;
            color: var(--accent-green);
            margin-bottom: 20px;
            border-bottom: 2px solid var(--accent-green);
            padding-bottom: 10px;
        }

        .protocol-section {
            margin-bottom: 25px;
        }

        .protocol-title {
            font-size: 1.2rem;
            color: var(--accent-blue);
            margin-bottom: 10px;
        }

        .task-list {
            list-style: none;
            padding-left: 0;
        }

        .task-item {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            padding: 10px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 5px;
            transition: all 0.3s ease;
        }

        .task-item:hover {
            background: rgba(0, 255, 65, 0.1);
        }

        .task-checkbox {
            width: 20px;
            height: 20px;
            margin-right: 15px;
            cursor: pointer;
            accent-color: var(--checkbox-checked);
        }

        .task-text {
            flex: 1;
        }

        .completed {
            text-decoration: line-through;
            opacity: 0.7;
        }

        /* Progress Bar */
        .progress-section {
            margin-bottom: 30px;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: var(--progress-bg);
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-green), var(--accent-blue));
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 10px;
        }

        .progress-text {
            text-align: center;
            color: var(--text-secondary);
        }

        /* Motivational Quote */
        .motivation {
            text-align: center;
            font-size: 1.3rem;
            color: var(--accent-green);
            font-weight: 600;
            margin: 30px 0;
            padding: 20px;
            border: 2px solid var(--accent-green);
            border-radius: 10px;
            background: rgba(0, 255, 65, 0.1);
            animation: glow 3s ease-in-out infinite alternate;
        }

        /* Weight Log */
        .weight-log {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .weight-input {
            padding: 10px;
            background: var(--bg-secondary);
            border: 2px solid var(--border-color);
            color: var(--text-primary);
            font-family: inherit;
            border-radius: 5px;
            width: 120px;
        }

        .weight-btn, .export-btn {
            background: var(--accent-green);
            color: var(--bg-primary);
            border: none;
            padding: 10px 20px;
            font-family: inherit;
            cursor: pointer;
            border-radius: 5px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .weight-btn:hover, .export-btn:hover {
            background: var(--accent-blue);
            transform: translateY(-2px);
        }

        /* Animations */
        @keyframes glow {
            from { text-shadow: 0 0 20px rgba(0, 255, 65, 0.5); }
            to { text-shadow: 0 0 30px rgba(0, 255, 65, 0.8); }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .title {
                font-size: 2rem;
            }

            .subtitle {
                font-size: 1rem;
            }

            .theme-toggle {
                position: relative;
                margin-bottom: 20px;
            }

            .profile-section {
                flex-direction: column;
            }

            .day-nav {
                flex-direction: column;
                gap: 10px;
            }
        }

        #profileImageInput {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <button class="theme-toggle" onclick="toggleTheme()">üåô DARK/LIGHT</button>
            <h1 class="title">KAIZEN 90‚Üí65 MISSION</h1>
            <p class="subtitle">From 90kg to 65kg in 90 Days ‚Äî No Excuses. No Breaks.</p>
        </header>

        <!-- Profile Section -->
        <section class="profile-section">
            <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='120' viewBox='0 0 24 24' fill='none' stroke='%2300ff41' stroke-width='2'%3E%3Cpath d='M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2'/%3E%3Ccircle cx='12' cy='7' r='4'/%3E%3C/svg%3E" 
                 alt="Profile" class="profile-image" id="profileImage">
            <input type="file" id="profileImageInput" accept="image/*" onchange="handleProfileUpload(event)">
            <button class="upload-btn" onclick="document.getElementById('profileImageInput').click()">
                UPLOAD PHOTO
            </button>
        </section>

        <!-- Stats Dashboard -->
        <section class="stats-dashboard">
            <div class="stat-card">
                <span class="stat-value" id="startWeight">90</span>
                <div class="stat-label">START WEIGHT (KG)</div>
            </div>
            <div class="stat-card">
                <span class="stat-value" id="currentWeight">90</span>
                <div class="stat-label">CURRENT WEIGHT (KG)</div>
            </div>
            <div class="stat-card">
                <span class="stat-value" id="targetWeight">65</span>
                <div class="stat-label">TARGET WEIGHT (KG)</div>
            </div>
            <div class="stat-card">
                <span class="stat-value" id="streak">0</span>
                <div class="stat-label">STREAK (DAYS)</div>
            </div>
            <div class="stat-card">
                <span class="stat-value" id="xp">0</span>
                <div class="stat-label">XP POINTS</div>
            </div>
            <div class="stat-card">
                <span class="stat-value" id="rank">RECRUIT</span>
                <div class="stat-label">RANK</div>
            </div>
        </section>

        <!-- Day Navigation -->
        <section class="day-nav">
            <button class="nav-btn" onclick="changeDay(-1)" id="prevBtn">‚Üê PREV DAY</button>
            <div class="day-info">
                <div class="current-day" id="currentDay">DAY 1</div>
                <div class="phase" id="currentPhase">PHASE 1: FOUNDATION</div>
            </div>
            <button class="nav-btn" onclick="changeDay(1)" id="nextBtn">NEXT DAY ‚Üí</button>
        </section>

        <!-- Progress Section -->
        <section class="progress-section">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="progress-text" id="progressText">0% Complete</div>
        </section>

        <!-- Motivational Quote -->
        <div class="motivation" id="motivationQuote">
            Day 1 ‚Äî Mission Start: Earn your respect.
        </div>

        <!-- Mission Log -->
        <section class="mission-log fade-in" id="missionLog">
            <h2 class="section-title">DAILY MISSION LOG</h2>
            
            <div class="protocol-section">
                <h3 class="protocol-title">MORNING PROTOCOL</h3>
                <ul class="task-list" id="morningTasks"></ul>
            </div>

            <div class="protocol-section">
                <h3 class="protocol-title">STRENGTH SESSION</h3>
                <ul class="task-list" id="strengthTasks"></ul>
            </div>

            <div class="protocol-section">
                <h3 class="protocol-title">NUTRITION PROTOCOL</h3>
                <ul class="task-list" id="nutritionTasks"></ul>
            </div>

            <div class="protocol-section">
                <h3 class="protocol-title">EVENING PROTOCOL</h3>
                <ul class="task-list" id="eveningTasks"></ul>
            </div>
        </section>

        <!-- Weight Log -->
        <section class="weight-log">
            <input type="number" class="weight-input" id="weightInput" placeholder="Weight (kg)" step="0.1">
            <button class="weight-btn" onclick="logWeight()">LOG WEIGHT</button>
            <button class="export-btn" onclick="exportData()">EXPORT DATA</button>
        </section>
    </div>

    <script>
        // Global state
        let currentDayIndex = 0;
        let userData = {
            currentWeight: 90,
            streak: 0,
            xp: 0,
            completedDays: {},
            weightLogs: [],
            profileImage: null
        };

        // Motivational quotes for different days
        const motivationQuotes = [
            "Day 1 ‚Äî Mission Start: Earn your respect.",
            "Day 5 ‚Äî Your body is adapting. Push harder.",
            "Day 10 ‚Äî Pain is weakness leaving the body.",
            "Day 15 ‚Äî Pain is your new warm-up.",
            "Day 20 ‚Äî Champions are made in the dark.",
            "Day 25 ‚Äî Your only competition is yesterday's you.",
            "Day 30 ‚Äî Foundation complete. Level up.",
            "Day 35 ‚Äî Acceleration phase: No mercy.",
            "Day 40 ‚Äî Every rep counts. Every meal matters.",
            "Day 45 ‚Äî Weakness is leaving your body.",
            "Day 50 ‚Äî You're becoming unstoppable.",
            "Day 55 ‚Äî The body achieves what the mind believes.",
            "Day 60 ‚Äî Acceleration complete. Time for war.",
            "Day 65 ‚Äî Final cut: Where legends are born.",
            "Day 70 ‚Äî You are forged in fire.",
            "Day 75 ‚Äî Victory is in your DNA.",
            "Day 80 ‚Äî The finish line sees you coming.",
            "Day 85 ‚Äî Five days. Give everything.",
            "Day 90 ‚Äî You are the weapon."
        ];

        // Mission data structure
        const missionData = {
            phases: {
                1: { name: "PHASE 1: FOUNDATION", days: [1, 30] },
                2: { name: "PHASE 2: ACCELERATION", days: [31, 60] },
                3: { name: "PHASE 3: FINAL CUT", days: [61, 90] }
            },
            protocols: {
                morning: {
                    1: [
                        "10,000 steps brisk walk",
                        "Jump rope 10 min (2√ó5 min)",
                        "500ml water",
                        "Do morning cardio fasted for maximum fat burn"
                    ],
                    2: [
                        "12,000 steps brisk walk",
                        "Jump rope 15 min (3√ó5 min)",
                        "600ml water",
                        "Do morning cardio fasted for maximum fat burn"
                    ],
                    3: [
                        "14-15,000 steps brisk walk",
                        "Jump rope 20 min (4√ó5 min)",
                        "700ml water",
                        "Do morning cardio fasted for maximum fat burn"
                    ]
                },
                strength: {
                    1: [
                        "Push-ups 3√ó15-20",
                        "Squats 3√ó20",
                        "Plank 3√ó45s",
                        "Lunges 3√ó12 each leg"
                    ],
                    2: [
                        "Push-ups 4√ó20",
                        "Squats 4√ó20-25",
                        "Plank 4√ó1min",
                        "Mountain climbers 4√ó30s"
                    ],
                    3: [
                        "Push-ups 5√ó25",
                        "Squats 5√ó25",
                        "Plank 5√ó1min",
                        "Burpees 4√ó15",
                        "Full-body circuit - minimal rest"
                    ]
                },
                nutrition: {
                    1: [
                        "Breakfast: 4-6 boiled eggs (2 yolks max) OR moong dal chilla + curd",
                        "Lunch: 100-150g chicken/fish/paneer + salad + 1 small roti/100g rice",
                        "Dinner: Chicken/fish/paneer or dal + steamed veggies",
                        "Snacks: 10-12 almonds, curd, or protein shake",
                        "Target: ~1,300 calories, 100-120g protein"
                    ],
                    2: [
                        "Breakfast: 4-6 boiled eggs (2 yolks max) OR oats + 2 boiled whites",
                        "Lunch: 100-150g chicken/fish/paneer + salad + reduced carbs (50-70g)",
                        "Dinner: Chicken/fish/paneer + steamed veggies (no carbs)",
                        "Snacks: Roasted chana, curd, or protein shake",
                        "Target: ~1,250 calories, 100-120g protein, refeed every 10 days"
                    ],
                    3: [
                        "Breakfast: 6 egg whites + 1 yolk OR paneer bhurji",
                        "Lunch: 150g chicken/fish/paneer + large salad (vegetables only)",
                        "Dinner: Lean protein + steamed veggies only",
                        "Snacks: Protein shake or handful of almonds",
                        "Target: ~1,200 calories, carbs only from vegetables, roti/rice only after leg day"
                    ]
                },
                evening: {
                    1: [
                        "Jump rope 15-20 min (3√ó5-7 min)",
                        "Optional: 20 min cycle/walk"
                    ],
                    2: [
                        "Jump rope 20-25 min",
                        "Cycling or incline treadmill 20-25 min"
                    ],
                    3: [
                        "Jump rope 25-30 min",
                        "Cycling 25-30 min or HIIT session"
                    ]
                }
            }
        };

        // Initialize app
        function initApp() {
            loadUserData();
            updateDisplay();
        }

        // Load user data from localStorage
        function loadUserData() {
            const saved = localStorage.getItem('kaizenMissionData');
            if (saved) {
                userData = { ...userData, ...JSON.parse(saved) };
            }
            
            if (userData.profileImage) {
                document.getElementById('profileImage').src = userData.profileImage;
            }
        }

        // Save user data to localStorage
        function saveUserData() {
            localStorage.setItem('kaizenMissionData', JSON.stringify(userData));
        }

        // Get current phase based on day
        function getCurrentPhase(day) {
            if (day <= 30) return 1;
            if (day <= 60) return 2;
            return 3;
        }

        // Update all display elements
        function updateDisplay() {
            const currentDay = currentDayIndex + 1;
            const phase = getCurrentPhase(currentDay);
            
            // Update day info
            document.getElementById('currentDay').textContent = `DAY ${currentDay}`;
            document.getElementById('currentPhase').textContent = missionData.phases[phase].name;
            
            // Update navigation buttons
            document.getElementById('prevBtn').disabled = currentDayIndex === 0;
            document.getElementById('nextBtn').disabled = currentDayIndex === 89;
            
            // Update stats
            document.getElementById('currentWeight').textContent = userData.currentWeight;
            document.getElementById('streak').textContent = userData.streak;
            document.getElementById('xp').textContent = userData.xp;
            document.getElementById('rank').textContent = getRank(userData.xp);
            
            // Update motivational quote
            const quoteIndex = Math.floor((currentDay - 1) / 5);
            document.getElementById('motivationQuote').textContent = 
                motivationQuotes[Math.min(quoteIndex, motivationQuotes.length - 1)];
            
            // Update mission log
            updateMissionLog(phase, currentDay);
            
            // Update progress
            updateProgress();
        }

        // Update mission log for current day
        function updateMissionLog(phase, day) {
            const dayKey = `day_${day}`;
            const dayData = userData.completedDays[dayKey] || {};
            
            updateTaskList('morningTasks', missionData.protocols.morning[phase], dayData, 'morning');
            updateTaskList('strengthTasks', missionData.protocols.strength[phase], dayData, 'strength');
            updateTaskList('nutritionTasks', missionData.protocols.nutrition[phase], dayData, 'nutrition');
            updateTaskList('eveningTasks', missionData.protocols.evening[phase], dayData, 'evening');
        }

        // Update task list
        function updateTaskList(elementId, tasks, dayData, category) {
            const container = document.getElementById(elementId);
            container.innerHTML = '';
            
            tasks.forEach((task, index) => {
                const taskId = `${category}_${index}`;
                const isCompleted = dayData[taskId] || false;
                
                const li = document.createElement('li');
                li.className = 'task-item';
                li.innerHTML = `
                    <input type="checkbox" class="task-checkbox" 
                           ${isCompleted ? 'checked' : ''}
                           onchange="toggleTask('${taskId}', this.checked)">
                    <span class="task-text ${isCompleted ? 'completed' : ''}">${task}</span>
                `;
                container.appendChild(li);
            });
        }

        // Toggle task completion
        function toggleTask(taskId, completed) {
            const currentDay = currentDayIndex + 1;
            const dayKey = `day_${currentDay}`;
            
            if (!userData.completedDays[dayKey]) {
                userData.completedDays[dayKey] = {};
            }
            
            userData.completedDays[dayKey][taskId] = completed;
            
            // Update visual state
            const taskElement = event.target.nextElementSibling;
            if (completed) {
                taskElement.classList.add('completed');
            } else {
                taskElement.classList.remove('completed');
            }
            
            updateProgress();
            saveUserData();
        }

        // Update progress bar and stats
        function updateProgress() {
            const currentDay = currentDayIndex + 1;
            const dayKey = `day_${currentDay}`;
            const dayData = userData.completedDays[dayKey] || {};
            
            const phase = getCurrentPhase(currentDay);
            const totalTasks = 
                missionData.protocols.morning[phase].length +
                missionData.protocols.strength[phase].length +
                missionData.protocols.nutrition[phase].length +
                missionData.protocols.evening[phase].length;
            
            const completedTasks = Object.values(dayData).filter(Boolean).length;
            const progressPercent = (completedTasks / totalTasks) * 100;
            
            document.getElementById('progressFill').style.width = `${progressPercent}%`;
            document.getElementById('progressText').textContent = `${Math.round(progressPercent)}% Complete`;
            
            // Update XP and streak
            if (progressPercent === 100) {
                if (!dayData.xpAwarded) {
                    userData.xp += 100;
                    dayData.xpAwarded = true;
                    updateStreak();
                }
            } else {
                if (dayData.xpAwarded) {
                    userData.xp = Math.max(0, userData.xp - 100);
                    dayData.xpAwarded = false;
                    updateStreak();
                }
            }
            
            document.getElementById('xp').textContent = userData.xp;
            document.getElementById('rank').textContent = getRank(userData.xp);
            saveUserData();
        }

        // Update streak calculation
        function updateStreak() {
            let streak = 0;
            for (let i = currentDayIndex; i >= 0; i--) {
                const dayKey = `day_${i + 1}`;
                const dayData = userData.completedDays[dayKey];
                if (dayData && dayData.xpAwarded) {
                    streak++;
                } else {
                    break;
                }
            }
            userData.streak = streak;
            document.getElementById('streak').textContent = streak;
        }

        // Get rank based on XP
        function getRank(xp) {
            if (xp >= 7000) return "KAIZEN MASTER";
            if (xp >= 4000) return "VETERAN";
            if (xp >= 2000) return "WARRIOR";
            return "RECRUIT";
        }

        // Change day
        function changeDay(direction) {
            const newDay = currentDayIndex + direction;
            if (newDay >= 0 && newDay < 90) {
                currentDayIndex = newDay;
                document.getElementById('missionLog').classList.remove('fade-in');
                setTimeout(() => {
                    updateDisplay();
                    document.getElementById('missionLog').classList.add('fade-in');
                }, 100);
            }
        }

        // Handle profile image upload
        function handleProfileUpload(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    userData.profileImage = e.target.result;
                    document.getElementById('profileImage').src = e.target.result;
                    saveUserData();
                };
                reader.readAsDataURL(file);
            }
        }

        // Log weight
        function logWeight() {
            const weight = parseFloat(document.getElementById('weightInput').value);
            if (weight && weight > 0) {
                userData.currentWeight = weight;
                userData.weightLogs.push({
                    date: new Date().toISOString(),
                    weight: weight,
                    day: currentDayIndex + 1
                });
                document.getElementById('currentWeight').textContent = weight;
                document.getElementById('weightInput').value = '';
                saveUserData();
            }
        }

        // Export data
        function exportData() {
            const dataToExport = {
                ...userData,
                exportDate: new Date().toISOString(),
                totalDays: 90,
                currentDay: currentDayIndex + 1
            };
            
            const blob = new Blob([JSON.stringify(dataToExport, null, 2)], {
                type: 'application/json'
            });
            
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `kaizen_mission_day_${currentDayIndex + 1}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        // Toggle theme
        function toggleTheme() {
            document.body.classList.toggle('light-theme');
            const isLight = document.body.classList.contains('light-theme');
            localStorage.setItem('kaizenTheme', isLight ? 'light' : 'dark');
        }

        // Load theme preference
        function loadTheme() {
            const savedTheme = localStorage.getItem('kaizenTheme');
            if (savedTheme === 'light') {
                document.body.classList.add('light-theme');
            }
        }

        // Initialize app when page loads
        document.addEventListener('DOMContentLoaded', function() {
            loadTheme();
            initApp();
        });

        // Auto-save every 30 seconds
        setInterval(saveUserData, 30000);
    </script>
</body>
</html> 